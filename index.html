<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>VisionXR â€” Virtual Try-On Store</title>

        <!-- PRODUCT DATA -->
        <script src="js/products.js"></script>

        <style>
            :root {
                --bg: #0e1015;
                --panel: #151824;
                --text: #f1f2f6;
                --muted: #a3a8bb;
                --accent: #4f8cff;
                --border: #262a3a;
            }

            * {
                box-sizing: border-box;
                font-family:
                    Inter,
                    system-ui,
                    -apple-system,
                    sans-serif;
            }

            body {
                margin: 0;
                background: var(--bg);
                color: var(--text);
            }

            /* HEADER */
            header {
                position: sticky;
                top: 0;
                z-index: 10;
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 24px 48px;
                border-bottom: 1px solid var(--border);
                background: rgba(14, 16, 21, 0.9);
                backdrop-filter: blur(10px);
            }

            header h1 {
                font-size: 18px;
                letter-spacing: 1px;
                font-weight: 600;
            }

            header nav a {
                margin-left: 28px;
                text-decoration: none;
                font-size: 14px;
                color: var(--muted);
            }

            /* MAIN */
            main {
                min-height: 100vh;
                padding: 48px;
                max-width: 1400px;
                margin: auto;
            }

            .section-heading {
                font-size: 28px;
                margin-bottom: 32px;
                margin-top: 32px;
            }

            .grid {
                display: grid;
                grid-template-columns: repeat(2, 1fr);
                gap: 40px;
            }

            /* PRODUCT CARD */
            .product {
                background: linear-gradient(180deg, #151824, #0e1015);
                border: 1px solid var(--border);
                border-radius: 24px;
                padding: 40px;
                display: grid;
                grid-template-rows: auto 1fr auto;
                transition:
                    transform 0.25s ease,
                    border-color 0.25s ease;
            }

            .product:hover {
                transform: translateY(-6px);
                border-color: var(--accent);
            }

            .product img {
                width: 100%;
                height: 240px;
                object-fit: contain;
                background: #fff;
                padding: 16px;
                border-radius: 16px;
                margin-bottom: 24px;
            }

            .product h2 {
                margin: 0 0 6px;
            }

            .product p {
                font-size: 14px;
                color: var(--muted);
                margin-bottom: 18px;
            }

            .price {
                font-size: 20px;
                margin-bottom: 20px;
            }

            .actions {
                display: flex;
                gap: 12px;
            }

            .btn {
                flex: 1;
                padding: 14px;
                border-radius: 14px;
                font-size: 14px;
                border: none;
                cursor: pointer;
            }

            .btn.primary {
                background: var(--accent);
                color: white;
            }

            .btn.secondary {
                background: transparent;
                color: var(--text);
                border: 1px solid var(--border);
            }

            /* MODAL */
            .modal {
                position: fixed;
                inset: 0;
                display: none;
                z-index: 1000;
            }

            .modal.active {
                display: block;
            }

            .modal-backdrop {
                position: absolute;
                inset: 0;
                background: rgba(0, 0, 0, 0.75);
            }

            .modal-content {
                position: relative;
                width: min(480px, 92vw);
                height: 85vh;
                margin: 5vh auto;
                background: #000;
                border-radius: 20px;
                overflow: hidden;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
            }

            .modal-close {
                position: absolute;
                top: 10px;
                right: 10px;
                z-index: 10;
                width: 34px;
                height: 34px;
                border-radius: 50%;
                border: none;
                background: rgba(0, 0, 0, 0.6);
                color: white;
                font-size: 16px;
                cursor: pointer;
            }

            .modal-content iframe {
                width: 100%;
                height: 100%;
                border: none;
            }

            /* RESPONSIVE */
            @media (max-width: 900px) {
                main {
                    padding: 24px;
                }
                .grid {
                    grid-template-columns: 1fr;
                }
                header {
                    padding: 20px 24px;
                }
            }
        </style>
    </head>

    <body>
        <header>
            <h1>VISIONXR</h1>
            <nav>
                <a href="#eyewear">Eyewear</a>
                <a href="#watches">Watches</a>
            </nav>
        </header>

        <main id="content"></main>

        <footer style="text-align: center; color: #888; padding: 40px 0">
            Â© 2026 Mystical Productions â€” Virtual Try-On Experience
        </footer>

        <!-- TRY-ON MODAL -->
        <div id="tryonModal" class="modal">
            <div class="modal-backdrop" onclick="closeTryOn()"></div>
            <div class="modal-content">
                <button class="modal-close" onclick="closeTryOn()">âœ•</button>
                <iframe id="tryonFrame" allow="camera *; microphone *"></iframe>
            </div>
        </div>

        <script>
            function renderSection(title, products) {
                return `
        <section id="${title.toLowerCase()}">
            <div class="section-heading">${title}</div>
            <div class="grid">
                ${products
                    .map(
                        (p) => `
                    <div class="product">
                        <img src="${p.image}" alt="${p.name}">
                        <h2>${p.name}</h2>
                        <p>${p.desc}</p>
                        <div class="price">${p.price}</div>
                        <div class="actions">
                            <button class="btn secondary">View Details</button>
                            <button class="btn primary" onclick="tryOn(${p.id})">
                                Try On
                            </button>
                        </div>
                    </div>
                `,
                    )
                    .join("")}
            </div>
        </section>
    `;
            }

            function renderStore() {
                const eyewear = Object.values(PRODUCTS).filter(
                    (p) => p.type === "glasses",
                );

                const watches = Object.values(PRODUCTS).filter(
                    (p) => p.type === "watch",
                );

                document.getElementById("content").innerHTML =
                    renderSection("Eyewear", eyewear) +
                    renderSection("Watches", watches);
            }

            /* MODAL CONTROLS */
            function tryOn(productId) {
                const modal = document.getElementById("tryonModal");
                const frame = document.getElementById("tryonFrame");

                const product = PRODUCTS[productId];

                if (!product) return;

                if (product.type === "watch") {
                    frame.src = `hand.html?product=${productId}`;
                } else {
                    frame.src = `face.html?product=${productId}`;
                }

                modal.classList.add("active");
            }

            function closeTryOn() {
                const modal = document.getElementById("tryonModal");
                const frame = document.getElementById("tryonFrame");

                modal.classList.remove("active");

                // ðŸ”¥ stop camera cleanly
                frame.src = "";
            }

            renderStore();
        </script>
    </body>
</html>
